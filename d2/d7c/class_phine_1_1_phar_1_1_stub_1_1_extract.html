<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Phar: Phine\Phar\Stub\Extract Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Phar
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d2/d7c/class_phine_1_1_phar_1_1_stub_1_1_extract.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="../../d6/d9d/class_phine_1_1_phar_1_1_stub_1_1_extract-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Phine\Phar\Stub\Extract Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Embeddable, self-contained archive extractor.  
 <a href="../../d2/d7c/class_phine_1_1_phar_1_1_stub_1_1_extract.html#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Phine\Phar\Stub\Extract:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d2/d77/class_phine_1_1_phar_1_1_stub_1_1_extract__coll__graph.png" border="0" usemap="#_phine_0C_phar_0C_stub_0C_extract_coll__map" alt="Collaboration graph"/></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7ccc1f667ebbf198a74e17a0dd1b89d8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d7c/class_phine_1_1_phar_1_1_stub_1_1_extract.html#a7ccc1f667ebbf198a74e17a0dd1b89d8">__construct</a> ($file)</td></tr>
<tr class="memdesc:a7ccc1f667ebbf198a74e17a0dd1b89d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the path of the file for reading.  <a href="#a7ccc1f667ebbf198a74e17a0dd1b89d8">More...</a><br/></td></tr>
<tr class="separator:a7ccc1f667ebbf198a74e17a0dd1b89d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad83d77f38b813b229bbe2b752c561d4f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d7c/class_phine_1_1_phar_1_1_stub_1_1_extract.html#ad83d77f38b813b229bbe2b752c561d4f">__destruct</a> ()</td></tr>
<tr class="memdesc:ad83d77f38b813b229bbe2b752c561d4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the file if it's open.  <a href="#ad83d77f38b813b229bbe2b752c561d4f">More...</a><br/></td></tr>
<tr class="separator:ad83d77f38b813b229bbe2b752c561d4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e55c6c54e959ed14de3c8cc196db25f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d7c/class_phine_1_1_phar_1_1_stub_1_1_extract.html#a9e55c6c54e959ed14de3c8cc196db25f">to</a> ($dir=null)</td></tr>
<tr class="memdesc:a9e55c6c54e959ed14de3c8cc196db25f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extracts one or more files to an output directory.  <a href="#a9e55c6c54e959ed14de3c8cc196db25f">More...</a><br/></td></tr>
<tr class="separator:a9e55c6c54e959ed14de3c8cc196db25f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:afd6f17298c8e1de966acb41d535e2ec1"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d7c/class_phine_1_1_phar_1_1_stub_1_1_extract.html#afd6f17298c8e1de966acb41d535e2ec1">from</a> ($file)</td></tr>
<tr class="memdesc:afd6f17298c8e1de966acb41d535e2ec1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new instance using the given archive file path.  <a href="#afd6f17298c8e1de966acb41d535e2ec1">More...</a><br/></td></tr>
<tr class="separator:afd6f17298c8e1de966acb41d535e2ec1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e344577ed49dde7f4ef446f4f60e77e"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d7c/class_phine_1_1_phar_1_1_stub_1_1_extract.html#a1e344577ed49dde7f4ef446f4f60e77e">getSource</a> ()</td></tr>
<tr class="memdesc:a1e344577ed49dde7f4ef446f4f60e77e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the embeddable source for this class.  <a href="#a1e344577ed49dde7f4ef446f4f60e77e">More...</a><br/></td></tr>
<tr class="separator:a1e344577ed49dde7f4ef446f4f60e77e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ad9f1bead70374680cdc3f7fba13c8595"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad9f1bead70374680cdc3f7fba13c8595"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>BZ2</b> = 0x2000</td></tr>
<tr class="separator:ad9f1bead70374680cdc3f7fba13c8595"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4835bc88886c48d87bd0adca410f4123"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4835bc88886c48d87bd0adca410f4123"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>GZ</b> = 0x1000</td></tr>
<tr class="separator:a4835bc88886c48d87bd0adca410f4123"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae04a8cefa0c9548cd5d83af5aed958e7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae04a8cefa0c9548cd5d83af5aed958e7"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>MASK</b> = 0x3000</td></tr>
<tr class="separator:ae04a8cefa0c9548cd5d83af5aed958e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Embeddable, self-contained archive extractor. </p>
<p>The purpose of this extraction class is for embedding it into the stub. This will allow archives to extract themselves for execution when the extension is not installed. Unlike the extraction class provided by the default stub, error checking is performed to provide better diagnostic information if an archive is corrupt.</p>
<dl class="section author"><dt>Author</dt><dd>Kevin Herrera <a href="#" onclick="location.href='mai'+'lto:'+'kev'+'in'+'@he'+'rr'+'era'+'.i'+'o'; return false;">kevin<span style="display: none;">.nosp@m.</span>@her<span style="display: none;">.nosp@m.</span>rera.<span style="display: none;">.nosp@m.</span>io</a> </dd></dl>

<p>Definition at line <a class="el" href="../../de/d47/_stub_2_extract_8php_source.html#l00019">19</a> of file <a class="el" href="../../de/d47/_stub_2_extract_8php_source.html">Stub/Extract.php</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7ccc1f667ebbf198a74e17a0dd1b89d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Phine\Phar\Stub\Extract::__construct </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the path of the file for reading. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$file</td><td>The path of the file.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>If the file path is not valid. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../de/d47/_stub_2_extract_8php_source.html#l00088">88</a> of file <a class="el" href="../../de/d47/_stub_2_extract_8php_source.html">Stub/Extract.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keywordflow">if</span> (!is_file($file)) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentException(</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                <span class="stringliteral">&quot;The path \&quot;$file\&quot; is not a file or does not exist.&quot;</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            );</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        $this-&gt;compression[<span class="stringliteral">&#39;bzip2&#39;</span>] = function_exists(<span class="stringliteral">&#39;bzdecompress&#39;</span>);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        $this-&gt;compression[<span class="stringliteral">&#39;gzip&#39;</span>] = function_exists(<span class="stringliteral">&#39;gzinflate&#39;</span>);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        $this-&gt;file = $file;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad83d77f38b813b229bbe2b752c561d4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Phine\Phar\Stub\Extract::__destruct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes the file if it's open. </p>

<p>Definition at line <a class="el" href="../../de/d47/_stub_2_extract_8php_source.html#l00104">104</a> of file <a class="el" href="../../de/d47/_stub_2_extract_8php_source.html">Stub/Extract.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keywordflow">if</span> ($this-&gt;handle) {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            fclose($this-&gt;handle);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="afd6f17298c8e1de966acb41d535e2ec1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Phine\Phar\Stub\Extract::from </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new instance using the given archive file path. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$file</td><td>The archive file path.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="../../d2/d7c/class_phine_1_1_phar_1_1_stub_1_1_extract.html" title="Embeddable, self-contained archive extractor. ">Extract</a> The new instance. </dd></dl>

<p>Definition at line <a class="el" href="../../de/d47/_stub_2_extract_8php_source.html#l00118">118</a> of file <a class="el" href="../../de/d47/_stub_2_extract_8php_source.html">Stub/Extract.php</a>.</p>

<p>Referenced by <a class="el" href="../../d2/d3b/_stub_8php_source.html#l00140">Phine\Phar\Stub\getStub()</a>.</p>
<div class="fragment"><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keyword">self</span>($file);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1e344577ed49dde7f4ef446f4f60e77e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Phine\Phar\Stub\Extract::getSource </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the embeddable source for this class. </p>
<dl class="section return"><dt>Returns</dt><dd>string The source code.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>If the file could not be read. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../de/d47/_stub_2_extract_8php_source.html#l00130">130</a> of file <a class="el" href="../../de/d47/_stub_2_extract_8php_source.html">Stub/Extract.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">false</span> === ($code = @file(__FILE__))) {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            $error = error_get_last();</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> RuntimeException($error[<span class="stringliteral">&#39;message&#39;</span>]);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        $code = array_slice($code, 6);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">foreach</span> ($code as $i =&gt; $line) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="keywordflow">if</span> (<span class="stringliteral">&#39;&#39;</span> === trim($line)) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                unset($code[$i]);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <span class="keywordflow">if</span> (preg_match(<span class="stringliteral">&#39;{^\s*(/\*+|\*+)}&#39;</span>, $line)) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                unset($code[$i]);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">return</span> join(<span class="stringliteral">&#39;&#39;</span>, $code);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9e55c6c54e959ed14de3c8cc196db25f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Phine\Phar\Stub\Extract::to </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$dir</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extracts one or more files to an output directory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$dir</td><td>The output directory path.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string The output directory path.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">RuntimeException</td><td>If a file could not be extracted. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../de/d47/_stub_2_extract_8php_source.html#l00163">163</a> of file <a class="el" href="../../de/d47/_stub_2_extract_8php_source.html">Stub/Extract.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">if</span> (null === $dir) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            $dir = sprintf(</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                <span class="stringliteral">&#39;%s%spharextract%s%s&#39;</span>,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                sys_get_temp_dir(),</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                DIRECTORY_SEPARATOR,</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                DIRECTORY_SEPARATOR,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                basename($this-&gt;file, <span class="stringliteral">&#39;.phar&#39;</span>)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            );</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        $check = $dir . DIRECTORY_SEPARATOR . md5_file($this-&gt;file);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">if</span> (file_exists($check)) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keywordflow">return</span> $dir;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">if</span> (null === $this-&gt;offset) {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            $this-&gt;offset = $this-&gt;findOffset();</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">foreach</span> ($this-&gt;getFileList() as $file) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            $path = $dir . <span class="charliteral">&#39;/&#39;</span> . $file[<span class="stringliteral">&#39;name&#39;</span>][<span class="stringliteral">&#39;data&#39;</span>];</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            $base = dirname($path);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            <span class="keywordflow">if</span> (!is_dir($base)) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                <span class="keywordflow">if</span> (!@mkdir($base, 0755, <span class="keyword">true</span>)) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                    $error = error_get_last();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> RuntimeException($error[<span class="stringliteral">&#39;message&#39;</span>]);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="keywordflow">if</span> (!@file_put_contents($path, $this-&gt;extractFile($file))) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                $error = error_get_last();</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> RuntimeException($error[<span class="stringliteral">&#39;message&#39;</span>]);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">if</span> (!@touch($check)) {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            $error = error_get_last();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> RuntimeException($error[<span class="stringliteral">&#39;message&#39;</span>]);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">return</span> $dir;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="../../de/d47/_stub_2_extract_8php_source.html">Stub/Extract.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>Phine</b></li><li class="navelem"><b>Phar</b></li><li class="navelem"><b>Stub</b></li><li class="navelem"><a class="el" href="../../d2/d7c/class_phine_1_1_phar_1_1_stub_1_1_extract.html">Extract</a></li>
    <li class="footer">Generated on Mon Nov 18 2013 16:20:14 for Phar by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
